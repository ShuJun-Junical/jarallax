{"version":3,"file":"jarallax.cjs","sources":["../src/utils/ready.js","../src/utils/global.js","../src/core.js","../node_modules/video-worker/dist/video-worker.esm.js","../src/ext-video.js","../src/deprecated/ext-element.js","../src/core.esm.js"],"sourcesContent":["function ready(callback) {\n  if (document.readyState === 'complete' || document.readyState === 'interactive') {\n    // Already ready or interactive, execute callback\n    callback();\n  } else {\n    document.addEventListener('DOMContentLoaded', callback, {\n      capture: true,\n      once: true,\n      passive: true,\n    });\n  }\n}\n\nexport default ready;\n","/* eslint-disable import/no-mutable-exports */\n/* eslint-disable no-restricted-globals */\nlet win;\n\nif (typeof window !== 'undefined') {\n  win = window;\n} else if (typeof global !== 'undefined') {\n  win = global;\n} else if (typeof self !== 'undefined') {\n  win = self;\n} else {\n  win = {};\n}\n\nexport default win;\n","/* eslint-disable no-param-reassign */\nimport domReady from './utils/ready';\nimport global from './utils/global';\n\nconst { navigator } = global;\n\nconst isIE =\n  navigator.userAgent.indexOf('MSIE ') > -1 ||\n  navigator.userAgent.indexOf('Trident/') > -1 ||\n  navigator.userAgent.indexOf('Edge/') > -1;\nconst isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n  navigator.userAgent\n);\n\nconst supportTransform = (() => {\n  const prefixes = 'transform WebkitTransform MozTransform'.split(' ');\n  const div = document.createElement('div');\n  for (let i = 0; i < prefixes.length; i += 1) {\n    if (div && div.style[prefixes[i]] !== undefined) {\n      return prefixes[i];\n    }\n  }\n  return false;\n})();\n\nlet $deviceHelper;\n\n/**\n * The most popular mobile browsers changes height after page scroll and this generates image jumping.\n * We can fix it using this workaround with vh units.\n */\nfunction getDeviceHeight() {\n  if (!$deviceHelper && document.body) {\n    $deviceHelper = document.createElement('div');\n    $deviceHelper.style.cssText =\n      'position: fixed; top: -9999px; left: 0; height: 100vh; width: 0;';\n    document.body.appendChild($deviceHelper);\n  }\n\n  return (\n    ($deviceHelper ? $deviceHelper.clientHeight : 0) ||\n    global.innerHeight ||\n    document.documentElement.clientHeight\n  );\n}\n\n// Window height data\nlet wndH;\nfunction updateWndVars() {\n  if (isMobile) {\n    wndH = getDeviceHeight();\n  } else {\n    wndH = global.innerHeight || document.documentElement.clientHeight;\n  }\n}\nupdateWndVars();\nglobal.addEventListener('resize', updateWndVars);\nglobal.addEventListener('orientationchange', updateWndVars);\nglobal.addEventListener('load', updateWndVars);\ndomReady(() => {\n  updateWndVars({\n    type: 'dom-loaded',\n  });\n});\n\n// list with all jarallax instances\n// need to render all in one scroll/resize event\nconst jarallaxList = [];\n\n// get all parents of the element.\nfunction getParents(elem) {\n  const parents = [];\n\n  while (elem.parentElement !== null) {\n    elem = elem.parentElement;\n\n    if (elem.nodeType === 1) {\n      parents.push(elem);\n    }\n  }\n\n  return parents;\n}\n\nfunction updateParallax() {\n  if (!jarallaxList.length) {\n    return;\n  }\n\n  jarallaxList.forEach((data, k) => {\n    const { instance, oldData } = data;\n\n    const clientRect = instance.$item.getBoundingClientRect();\n\n    const newData = {\n      width: clientRect.width,\n      height: clientRect.height,\n      top: clientRect.top,\n      bottom: clientRect.bottom,\n      wndW: global.innerWidth,\n      wndH,\n    };\n\n    const isResized =\n      !oldData ||\n      oldData.wndW !== newData.wndW ||\n      oldData.wndH !== newData.wndH ||\n      oldData.width !== newData.width ||\n      oldData.height !== newData.height;\n    const isScrolled =\n      isResized || !oldData || oldData.top !== newData.top || oldData.bottom !== newData.bottom;\n\n    jarallaxList[k].oldData = newData;\n\n    if (isResized) {\n      instance.onResize();\n    }\n    if (isScrolled) {\n      instance.onScroll();\n    }\n  });\n\n  global.requestAnimationFrame(updateParallax);\n}\n\nlet instanceID = 0;\n\n// Jarallax class\nclass Jarallax {\n  constructor(item, userOptions) {\n    const self = this;\n\n    self.instanceID = instanceID;\n    instanceID += 1;\n\n    self.$item = item;\n\n    self.defaults = {\n      type: 'scroll', // type of parallax: scroll, scale, opacity, scale-opacity, scroll-opacity\n      speed: 0.5, // supported value from -1 to 2\n      imgSrc: null,\n      imgElement: '.jarallax-img',\n      imgSize: 'cover',\n      imgPosition: '50% 50%',\n      imgRepeat: 'no-repeat', // supported only for background, not for <img> tag\n      keepImg: false, // keep <img> tag in it's default place\n      elementInViewport: null,\n      zIndex: -100,\n      disableParallax: false,\n      disableVideo: false,\n\n      // video\n      videoSrc: null,\n      videoStartTime: 0,\n      videoEndTime: 0,\n      videoVolume: 0,\n      videoLoop: true,\n      videoPlayOnlyVisible: true,\n      videoLazyLoading: true,\n\n      // events\n      onScroll: null, // function(calculations) {}\n      onInit: null, // function() {}\n      onDestroy: null, // function() {}\n      onCoverImage: null, // function() {}\n    };\n\n    // prepare data-options\n    const dataOptions = self.$item.dataset || {};\n    const pureDataOptions = {};\n    Object.keys(dataOptions).forEach((key) => {\n      const loweCaseOption = key.substr(0, 1).toLowerCase() + key.substr(1);\n      if (loweCaseOption && typeof self.defaults[loweCaseOption] !== 'undefined') {\n        pureDataOptions[loweCaseOption] = dataOptions[key];\n      }\n    });\n\n    self.options = self.extend({}, self.defaults, pureDataOptions, userOptions);\n    self.pureOptions = self.extend({}, self.options);\n\n    // prepare 'true' and 'false' strings to boolean\n    Object.keys(self.options).forEach((key) => {\n      if (self.options[key] === 'true') {\n        self.options[key] = true;\n      } else if (self.options[key] === 'false') {\n        self.options[key] = false;\n      }\n    });\n\n    // fix speed option [-1.0, 2.0]\n    self.options.speed = Math.min(2, Math.max(-1, parseFloat(self.options.speed)));\n\n    // prepare disableParallax callback\n    if (typeof self.options.disableParallax === 'string') {\n      self.options.disableParallax = new RegExp(self.options.disableParallax);\n    }\n    if (self.options.disableParallax instanceof RegExp) {\n      const disableParallaxRegexp = self.options.disableParallax;\n      self.options.disableParallax = () => disableParallaxRegexp.test(navigator.userAgent);\n    }\n    if (typeof self.options.disableParallax !== 'function') {\n      self.options.disableParallax = () => false;\n    }\n\n    // prepare disableVideo callback\n    if (typeof self.options.disableVideo === 'string') {\n      self.options.disableVideo = new RegExp(self.options.disableVideo);\n    }\n    if (self.options.disableVideo instanceof RegExp) {\n      const disableVideoRegexp = self.options.disableVideo;\n      self.options.disableVideo = () => disableVideoRegexp.test(navigator.userAgent);\n    }\n    if (typeof self.options.disableVideo !== 'function') {\n      self.options.disableVideo = () => false;\n    }\n\n    // custom element to check if parallax in viewport\n    let elementInVP = self.options.elementInViewport;\n    // get first item from array\n    if (\n      elementInVP &&\n      typeof elementInVP === 'object' &&\n      typeof elementInVP.length !== 'undefined'\n    ) {\n      [elementInVP] = elementInVP;\n    }\n    // check if dom element\n    if (!(elementInVP instanceof Element)) {\n      elementInVP = null;\n    }\n    self.options.elementInViewport = elementInVP;\n\n    self.image = {\n      src: self.options.imgSrc || null,\n      $container: null,\n      useImgTag: false,\n\n      // 1. Position fixed is needed for the most of browsers because absolute position have glitches\n      // 2. On MacOS with smooth scroll there is a huge lags with absolute position - https://github.com/nk-o/jarallax/issues/75\n      // 3. Previously used 'absolute' for mobile devices. But we re-tested on iPhone 12 and 'fixed' position is working better, then 'absolute', so for now position is always 'fixed'\n      position: 'fixed',\n    };\n\n    if (self.initImg() && self.canInitParallax()) {\n      self.init();\n    }\n  }\n\n  // add styles to element\n  // eslint-disable-next-line class-methods-use-this\n  css(el, styles) {\n    if (typeof styles === 'string') {\n      return global.getComputedStyle(el).getPropertyValue(styles);\n    }\n\n    // add transform property with vendor prefix\n    if (styles.transform && supportTransform) {\n      styles[supportTransform] = styles.transform;\n    }\n\n    Object.keys(styles).forEach((key) => {\n      el.style[key] = styles[key];\n    });\n    return el;\n  }\n\n  // Extend like jQuery.extend\n  // eslint-disable-next-line class-methods-use-this\n  extend(out, ...args) {\n    out = out || {};\n\n    Object.keys(args).forEach((i) => {\n      if (!args[i]) {\n        return;\n      }\n      Object.keys(args[i]).forEach((key) => {\n        out[key] = args[i][key];\n      });\n    });\n\n    return out;\n  }\n\n  // get window size and scroll position. Useful for extensions\n  // eslint-disable-next-line class-methods-use-this\n  getWindowData() {\n    return {\n      width: global.innerWidth || document.documentElement.clientWidth,\n      height: wndH,\n      y: document.documentElement.scrollTop,\n    };\n  }\n\n  // Jarallax functions\n  initImg() {\n    const self = this;\n\n    // find image element\n    let $imgElement = self.options.imgElement;\n    if ($imgElement && typeof $imgElement === 'string') {\n      $imgElement = self.$item.querySelector($imgElement);\n    }\n\n    // check if dom element\n    if (!($imgElement instanceof Element)) {\n      if (self.options.imgSrc) {\n        $imgElement = new Image();\n        $imgElement.src = self.options.imgSrc;\n      } else {\n        $imgElement = null;\n      }\n    }\n\n    if ($imgElement) {\n      if (self.options.keepImg) {\n        self.image.$item = $imgElement.cloneNode(true);\n      } else {\n        self.image.$item = $imgElement;\n        self.image.$itemParent = $imgElement.parentNode;\n      }\n      self.image.useImgTag = true;\n    }\n\n    // true if there is img tag\n    if (self.image.$item) {\n      return true;\n    }\n\n    // get image src\n    if (self.image.src === null) {\n      self.image.src =\n        'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\n      self.image.bgImage = self.css(self.$item, 'background-image');\n    }\n    return !(!self.image.bgImage || self.image.bgImage === 'none');\n  }\n\n  canInitParallax() {\n    return supportTransform && !this.options.disableParallax();\n  }\n\n  init() {\n    const self = this;\n    const containerStyles = {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      width: '100%',\n      height: '100%',\n      overflow: 'hidden',\n    };\n    let imageStyles = {\n      pointerEvents: 'none',\n      transformStyle: 'preserve-3d',\n      backfaceVisibility: 'hidden',\n      willChange: 'transform,opacity',\n    };\n\n    if (!self.options.keepImg) {\n      // save default user styles\n      const curStyle = self.$item.getAttribute('style');\n      if (curStyle) {\n        self.$item.setAttribute('data-jarallax-original-styles', curStyle);\n      }\n      if (self.image.useImgTag) {\n        const curImgStyle = self.image.$item.getAttribute('style');\n        if (curImgStyle) {\n          self.image.$item.setAttribute('data-jarallax-original-styles', curImgStyle);\n        }\n      }\n    }\n\n    // set relative position and z-index to the parent\n    if (self.css(self.$item, 'position') === 'static') {\n      self.css(self.$item, {\n        position: 'relative',\n      });\n    }\n    if (self.css(self.$item, 'z-index') === 'auto') {\n      self.css(self.$item, {\n        zIndex: 0,\n      });\n    }\n\n    // container for parallax image\n    self.image.$container = document.createElement('div');\n    self.css(self.image.$container, containerStyles);\n    self.css(self.image.$container, {\n      'z-index': self.options.zIndex,\n    });\n\n    // fix for IE https://github.com/nk-o/jarallax/issues/110\n    if (isIE) {\n      self.css(self.image.$container, {\n        opacity: 0.9999,\n      });\n    }\n\n    self.image.$container.setAttribute('id', `jarallax-container-${self.instanceID}`);\n    self.$item.appendChild(self.image.$container);\n\n    // use img tag\n    if (self.image.useImgTag) {\n      imageStyles = self.extend(\n        {\n          'object-fit': self.options.imgSize,\n          'object-position': self.options.imgPosition,\n          // support for plugin https://github.com/bfred-it/object-fit-images\n          'font-family': `object-fit: ${self.options.imgSize}; object-position: ${self.options.imgPosition};`,\n          'max-width': 'none',\n        },\n        containerStyles,\n        imageStyles\n      );\n\n      // use div with background image\n    } else {\n      self.image.$item = document.createElement('div');\n      if (self.image.src) {\n        imageStyles = self.extend(\n          {\n            'background-position': self.options.imgPosition,\n            'background-size': self.options.imgSize,\n            'background-repeat': self.options.imgRepeat,\n            'background-image': self.image.bgImage || `url(\"${self.image.src}\")`,\n          },\n          containerStyles,\n          imageStyles\n        );\n      }\n    }\n\n    if (\n      self.options.type === 'opacity' ||\n      self.options.type === 'scale' ||\n      self.options.type === 'scale-opacity' ||\n      self.options.speed === 1\n    ) {\n      self.image.position = 'absolute';\n    }\n\n    // 1. Check if one of parents have transform style (without this check, scroll transform will be inverted if used parallax with position fixed)\n    //    discussion - https://github.com/nk-o/jarallax/issues/9\n    // 2. Check if parents have overflow scroll\n    if (self.image.position === 'fixed') {\n      const $parents = getParents(self.$item).filter((el) => {\n        const styles = global.getComputedStyle(el);\n        const parentTransform =\n          styles['-webkit-transform'] || styles['-moz-transform'] || styles.transform;\n        const overflowRegex = /(auto|scroll)/;\n\n        return (\n          (parentTransform && parentTransform !== 'none') ||\n          overflowRegex.test(styles.overflow + styles['overflow-y'] + styles['overflow-x'])\n        );\n      });\n\n      self.image.position = $parents.length ? 'absolute' : 'fixed';\n    }\n\n    // add position to parallax block\n    imageStyles.position = self.image.position;\n\n    // insert parallax image\n    self.css(self.image.$item, imageStyles);\n    self.image.$container.appendChild(self.image.$item);\n\n    // set initial position and size\n    self.onResize();\n    self.onScroll(true);\n\n    // call onInit event\n    if (self.options.onInit) {\n      self.options.onInit.call(self);\n    }\n\n    // remove default user background\n    if (self.css(self.$item, 'background-image') !== 'none') {\n      self.css(self.$item, {\n        'background-image': 'none',\n      });\n    }\n\n    self.addToParallaxList();\n  }\n\n  // add to parallax instances list\n  addToParallaxList() {\n    jarallaxList.push({\n      instance: this,\n    });\n\n    if (jarallaxList.length === 1) {\n      global.requestAnimationFrame(updateParallax);\n    }\n  }\n\n  // remove from parallax instances list\n  removeFromParallaxList() {\n    const self = this;\n\n    jarallaxList.forEach((data, key) => {\n      if (data.instance.instanceID === self.instanceID) {\n        jarallaxList.splice(key, 1);\n      }\n    });\n  }\n\n  destroy() {\n    const self = this;\n\n    self.removeFromParallaxList();\n\n    // return styles on container as before jarallax init\n    const originalStylesTag = self.$item.getAttribute('data-jarallax-original-styles');\n    self.$item.removeAttribute('data-jarallax-original-styles');\n    // null occurs if there is no style tag before jarallax init\n    if (!originalStylesTag) {\n      self.$item.removeAttribute('style');\n    } else {\n      self.$item.setAttribute('style', originalStylesTag);\n    }\n\n    if (self.image.useImgTag) {\n      // return styles on img tag as before jarallax init\n      const originalStylesImgTag = self.image.$item.getAttribute('data-jarallax-original-styles');\n      self.image.$item.removeAttribute('data-jarallax-original-styles');\n      // null occurs if there is no style tag before jarallax init\n      if (!originalStylesImgTag) {\n        self.image.$item.removeAttribute('style');\n      } else {\n        self.image.$item.setAttribute('style', originalStylesTag);\n      }\n\n      // move img tag to its default position\n      if (self.image.$itemParent) {\n        self.image.$itemParent.appendChild(self.image.$item);\n      }\n    }\n\n    // remove additional dom elements\n    if (self.$clipStyles) {\n      self.$clipStyles.parentNode.removeChild(self.$clipStyles);\n    }\n    if (self.image.$container) {\n      self.image.$container.parentNode.removeChild(self.image.$container);\n    }\n\n    // call onDestroy event\n    if (self.options.onDestroy) {\n      self.options.onDestroy.call(self);\n    }\n\n    // delete jarallax from item\n    delete self.$item.jarallax;\n  }\n\n  // it will remove some image overlapping\n  // overlapping occur due to an image position fixed inside absolute position element\n  clipContainer() {\n    // needed only when background in fixed position\n    if (this.image.position !== 'fixed') {\n      return;\n    }\n\n    const self = this;\n    const rect = self.image.$container.getBoundingClientRect();\n    const { width, height } = rect;\n\n    if (!self.$clipStyles) {\n      self.$clipStyles = document.createElement('style');\n      self.$clipStyles.setAttribute('type', 'text/css');\n      self.$clipStyles.setAttribute('id', `jarallax-clip-${self.instanceID}`);\n      const head = document.head || document.getElementsByTagName('head')[0];\n      head.appendChild(self.$clipStyles);\n    }\n\n    // clip is used for old browsers.\n    // clip-path for modern browsers (also fixes Safari v14 bug https://github.com/nk-o/jarallax/issues/181 ).\n    const styles = `#jarallax-container-${self.instanceID} {\n            clip: rect(0 ${width}px ${height}px 0);\n            clip: rect(0, ${width}px, ${height}px, 0);\n            -webkit-clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);\n            clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);\n        }`;\n\n    // add clip styles inline (this method need for support IE8 and less browsers)\n    if (self.$clipStyles.styleSheet) {\n      self.$clipStyles.styleSheet.cssText = styles;\n    } else {\n      self.$clipStyles.innerHTML = styles;\n    }\n  }\n\n  coverImage() {\n    const self = this;\n\n    const rect = self.image.$container.getBoundingClientRect();\n    const contH = rect.height;\n    const { speed } = self.options;\n    const isScroll = self.options.type === 'scroll' || self.options.type === 'scroll-opacity';\n    let scrollDist = 0;\n    let resultH = contH;\n    let resultMT = 0;\n\n    // scroll parallax\n    if (isScroll) {\n      // scroll distance and height for image\n      if (speed < 0) {\n        scrollDist = speed * Math.max(contH, wndH);\n\n        if (wndH < contH) {\n          scrollDist -= speed * (contH - wndH);\n        }\n      } else {\n        scrollDist = speed * (contH + wndH);\n      }\n\n      // size for scroll parallax\n      if (speed > 1) {\n        resultH = Math.abs(scrollDist - wndH);\n      } else if (speed < 0) {\n        resultH = scrollDist / speed + Math.abs(scrollDist);\n      } else {\n        resultH += (wndH - contH) * (1 - speed);\n      }\n\n      scrollDist /= 2;\n    }\n\n    // store scroll distance\n    self.parallaxScrollDistance = scrollDist;\n\n    // vertical center\n    if (isScroll) {\n      resultMT = (wndH - resultH) / 2;\n    } else {\n      resultMT = (contH - resultH) / 2;\n    }\n\n    // apply result to item\n    self.css(self.image.$item, {\n      height: `${resultH}px`,\n      marginTop: `${resultMT}px`,\n      left: self.image.position === 'fixed' ? `${rect.left}px` : '0',\n      width: `${rect.width}px`,\n    });\n\n    // call onCoverImage event\n    if (self.options.onCoverImage) {\n      self.options.onCoverImage.call(self);\n    }\n\n    // return some useful data. Used in the video cover function\n    return {\n      image: {\n        height: resultH,\n        marginTop: resultMT,\n      },\n      container: rect,\n    };\n  }\n\n  isVisible() {\n    return this.isElementInViewport || false;\n  }\n\n  onScroll(force) {\n    const self = this;\n\n    const rect = self.$item.getBoundingClientRect();\n    const contT = rect.top;\n    const contH = rect.height;\n    const styles = {};\n\n    // check if in viewport\n    let viewportRect = rect;\n    if (self.options.elementInViewport) {\n      viewportRect = self.options.elementInViewport.getBoundingClientRect();\n    }\n    self.isElementInViewport =\n      viewportRect.bottom >= 0 &&\n      viewportRect.right >= 0 &&\n      viewportRect.top <= wndH &&\n      viewportRect.left <= global.innerWidth;\n\n    // stop calculations if item is not in viewport\n    if (force ? false : !self.isElementInViewport) {\n      return;\n    }\n\n    // calculate parallax helping variables\n    const beforeTop = Math.max(0, contT);\n    const beforeTopEnd = Math.max(0, contH + contT);\n    const afterTop = Math.max(0, -contT);\n    const beforeBottom = Math.max(0, contT + contH - wndH);\n    const beforeBottomEnd = Math.max(0, contH - (contT + contH - wndH));\n    const afterBottom = Math.max(0, -contT + wndH - contH);\n    const fromViewportCenter = 1 - 2 * ((wndH - contT) / (wndH + contH));\n\n    // calculate on how percent of section is visible\n    let visiblePercent = 1;\n    if (contH < wndH) {\n      visiblePercent = 1 - (afterTop || beforeBottom) / contH;\n    } else if (beforeTopEnd <= wndH) {\n      visiblePercent = beforeTopEnd / wndH;\n    } else if (beforeBottomEnd <= wndH) {\n      visiblePercent = beforeBottomEnd / wndH;\n    }\n\n    // opacity\n    if (\n      self.options.type === 'opacity' ||\n      self.options.type === 'scale-opacity' ||\n      self.options.type === 'scroll-opacity'\n    ) {\n      styles.transform = 'translate3d(0,0,0)';\n      styles.opacity = visiblePercent;\n    }\n\n    // scale\n    if (self.options.type === 'scale' || self.options.type === 'scale-opacity') {\n      let scale = 1;\n      if (self.options.speed < 0) {\n        scale -= self.options.speed * visiblePercent;\n      } else {\n        scale += self.options.speed * (1 - visiblePercent);\n      }\n      styles.transform = `scale(${scale}) translate3d(0,0,0)`;\n    }\n\n    // scroll\n    if (self.options.type === 'scroll' || self.options.type === 'scroll-opacity') {\n      let positionY = self.parallaxScrollDistance * fromViewportCenter;\n\n      // fix if parallax block in absolute position\n      if (self.image.position === 'absolute') {\n        positionY -= contT;\n      }\n\n      styles.transform = `translate3d(0,${positionY}px,0)`;\n    }\n\n    self.css(self.image.$item, styles);\n\n    // call onScroll event\n    if (self.options.onScroll) {\n      self.options.onScroll.call(self, {\n        section: rect,\n\n        beforeTop,\n        beforeTopEnd,\n        afterTop,\n        beforeBottom,\n        beforeBottomEnd,\n        afterBottom,\n\n        visiblePercent,\n        fromViewportCenter,\n      });\n    }\n  }\n\n  onResize() {\n    this.coverImage();\n    this.clipContainer();\n  }\n}\n\n// global definition\nconst jarallax = function (items, options, ...args) {\n  // check for dom element\n  // thanks: http://stackoverflow.com/questions/384286/javascript-isdom-how-do-you-check-if-a-javascript-object-is-a-dom-object\n  if (\n    typeof HTMLElement === 'object'\n      ? items instanceof HTMLElement\n      : items &&\n        typeof items === 'object' &&\n        items !== null &&\n        items.nodeType === 1 &&\n        typeof items.nodeName === 'string'\n  ) {\n    items = [items];\n  }\n\n  const len = items.length;\n  let k = 0;\n  let ret;\n\n  for (k; k < len; k += 1) {\n    if (typeof options === 'object' || typeof options === 'undefined') {\n      if (!items[k].jarallax) {\n        items[k].jarallax = new Jarallax(items[k], options);\n      }\n    } else if (items[k].jarallax) {\n      // eslint-disable-next-line prefer-spread\n      ret = items[k].jarallax[options].apply(items[k].jarallax, args);\n    }\n    if (typeof ret !== 'undefined') {\n      return ret;\n    }\n  }\n\n  return items;\n};\njarallax.constructor = Jarallax;\n\nexport default jarallax;\n","/*!\n * Name    : Video Worker\n * Version : 2.0.0\n * Author  : nK <https://nkdev.info>\n * GitHub  : https://github.com/nk-o/video-worker\n */\n\n/* eslint-disable import/no-mutable-exports */\n\n/* eslint-disable no-restricted-globals */\nlet win;\n\nif (typeof window !== 'undefined') {\n  win = window;\n} else if (typeof global !== 'undefined') {\n  win = global;\n} else if (typeof self !== 'undefined') {\n  win = self;\n} else {\n  win = {};\n}\n\nvar global$1 = win;\n\n// Deferred\n// thanks http://stackoverflow.com/questions/18096715/implement-deferred-object-without-using-jquery\nfunction Deferred() {\n  this.doneCallbacks = [];\n  this.failCallbacks = [];\n}\n\nDeferred.prototype = {\n  execute(list, args) {\n    let i = list.length; // eslint-disable-next-line no-param-reassign\n\n    args = Array.prototype.slice.call(args);\n\n    while (i) {\n      i -= 1;\n      list[i].apply(null, args);\n    }\n  },\n\n  resolve(...args) {\n    this.execute(this.doneCallbacks, args);\n  },\n\n  reject(...args) {\n    this.execute(this.failCallbacks, args);\n  },\n\n  done(callback) {\n    this.doneCallbacks.push(callback);\n  },\n\n  fail(callback) {\n    this.failCallbacks.push(callback);\n  }\n\n};\n\nlet ID = 0;\nlet YoutubeAPIadded = 0;\nlet VimeoAPIadded = 0;\nlet loadingYoutubePlayer = 0;\nlet loadingVimeoPlayer = 0;\nconst loadingYoutubeDefer = /*#__PURE__*/new Deferred();\nconst loadingVimeoDefer = /*#__PURE__*/new Deferred();\n\nclass VideoWorker {\n  constructor(url, options) {\n    const self = this;\n    self.url = url;\n    self.options_default = {\n      autoplay: false,\n      loop: false,\n      mute: false,\n      volume: 100,\n      showControls: true,\n      accessibilityHidden: false,\n      // start / end video time in seconds\n      startTime: 0,\n      endTime: 0\n    };\n    self.options = self.extend({}, self.options_default, options); // Fix wrong option name.\n    // Thanks to https://github.com/nk-o/video-worker/issues/13.\n\n    if (typeof self.options.showContols !== 'undefined') {\n      self.options.showControls = self.options.showContols;\n      delete self.options.showContols;\n    } // check URL\n\n\n    self.videoID = self.parseURL(url); // init\n\n    if (self.videoID) {\n      self.ID = ID;\n      ID += 1;\n      self.loadAPI();\n      self.init();\n    }\n  } // Extend like jQuery.extend\n  // eslint-disable-next-line class-methods-use-this\n\n\n  extend(...args) {\n    const out = args[0] || {};\n    Object.keys(args).forEach(i => {\n      if (!args[i]) {\n        return;\n      }\n\n      Object.keys(args[i]).forEach(key => {\n        out[key] = args[i][key];\n      });\n    });\n    return out;\n  }\n\n  parseURL(url) {\n    // parse youtube ID\n    function getYoutubeID(ytUrl) {\n      // eslint-disable-next-line no-useless-escape\n      const regExp = /.*(?:youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=)([^#\\&\\?]*).*/;\n      const match = ytUrl.match(regExp);\n      return match && match[1].length === 11 ? match[1] : false;\n    } // parse vimeo ID\n\n\n    function getVimeoID(vmUrl) {\n      // eslint-disable-next-line no-useless-escape\n      const regExp = /https?:\\/\\/(?:www\\.|player\\.)?vimeo.com\\/(?:channels\\/(?:\\w+\\/)?|groups\\/([^/]*)\\/videos\\/|album\\/(\\d+)\\/video\\/|video\\/|)(\\d+)(?:$|\\/|\\?)/;\n      const match = vmUrl.match(regExp);\n      return match && match[3] ? match[3] : false;\n    } // parse local string\n\n\n    function getLocalVideos(locUrl) {\n      // eslint-disable-next-line no-useless-escape\n      const videoFormats = locUrl.split(/,(?=mp4\\:|webm\\:|ogv\\:|ogg\\:)/);\n      const result = {};\n      let ready = 0;\n      videoFormats.forEach(val => {\n        // eslint-disable-next-line no-useless-escape\n        const match = val.match(/^(mp4|webm|ogv|ogg)\\:(.*)/);\n\n        if (match && match[1] && match[2]) {\n          // eslint-disable-next-line prefer-destructuring\n          result[match[1] === 'ogv' ? 'ogg' : match[1]] = match[2];\n          ready = 1;\n        }\n      });\n      return ready ? result : false;\n    }\n\n    const Youtube = getYoutubeID(url);\n    const Vimeo = getVimeoID(url);\n    const Local = getLocalVideos(url);\n\n    if (Youtube) {\n      this.type = 'youtube';\n      return Youtube;\n    }\n\n    if (Vimeo) {\n      this.type = 'vimeo';\n      return Vimeo;\n    }\n\n    if (Local) {\n      this.type = 'local';\n      return Local;\n    }\n\n    return false;\n  }\n\n  isValid() {\n    return !!this.videoID;\n  } // events\n\n\n  on(name, callback) {\n    this.userEventsList = this.userEventsList || []; // add new callback in events list\n\n    (this.userEventsList[name] || (this.userEventsList[name] = [])).push(callback);\n  }\n\n  off(name, callback) {\n    if (!this.userEventsList || !this.userEventsList[name]) {\n      return;\n    }\n\n    if (!callback) {\n      delete this.userEventsList[name];\n    } else {\n      this.userEventsList[name].forEach((val, key) => {\n        if (val === callback) {\n          this.userEventsList[name][key] = false;\n        }\n      });\n    }\n  }\n\n  fire(name, ...args) {\n    if (this.userEventsList && typeof this.userEventsList[name] !== 'undefined') {\n      this.userEventsList[name].forEach(val => {\n        // call with all arguments\n        if (val) {\n          val.apply(this, args);\n        }\n      });\n    }\n  }\n\n  play(start) {\n    const self = this;\n\n    if (!self.player) {\n      return;\n    }\n\n    if (self.type === 'youtube' && self.player.playVideo) {\n      if (typeof start !== 'undefined') {\n        self.player.seekTo(start || 0);\n      }\n\n      if (global$1.YT.PlayerState.PLAYING !== self.player.getPlayerState()) {\n        self.player.playVideo();\n      }\n    }\n\n    if (self.type === 'vimeo') {\n      if (typeof start !== 'undefined') {\n        self.player.setCurrentTime(start);\n      }\n\n      self.player.getPaused().then(paused => {\n        if (paused) {\n          self.player.play();\n        }\n      });\n    }\n\n    if (self.type === 'local') {\n      if (typeof start !== 'undefined') {\n        self.player.currentTime = start;\n      }\n\n      if (self.player.paused) {\n        self.player.play();\n      }\n    }\n  }\n\n  pause() {\n    const self = this;\n\n    if (!self.player) {\n      return;\n    }\n\n    if (self.type === 'youtube' && self.player.pauseVideo) {\n      if (global$1.YT.PlayerState.PLAYING === self.player.getPlayerState()) {\n        self.player.pauseVideo();\n      }\n    }\n\n    if (self.type === 'vimeo') {\n      self.player.getPaused().then(paused => {\n        if (!paused) {\n          self.player.pause();\n        }\n      });\n    }\n\n    if (self.type === 'local') {\n      if (!self.player.paused) {\n        self.player.pause();\n      }\n    }\n  }\n\n  mute() {\n    const self = this;\n\n    if (!self.player) {\n      return;\n    }\n\n    if (self.type === 'youtube' && self.player.mute) {\n      self.player.mute();\n    }\n\n    if (self.type === 'vimeo' && self.player.setVolume) {\n      self.player.setVolume(0);\n    }\n\n    if (self.type === 'local') {\n      self.$video.muted = true;\n    }\n  }\n\n  unmute() {\n    const self = this;\n\n    if (!self.player) {\n      return;\n    }\n\n    if (self.type === 'youtube' && self.player.mute) {\n      self.player.unMute();\n    }\n\n    if (self.type === 'vimeo' && self.player.setVolume) {\n      self.player.setVolume(self.options.volume);\n    }\n\n    if (self.type === 'local') {\n      self.$video.muted = false;\n    }\n  }\n\n  setVolume(volume = false) {\n    const self = this;\n\n    if (!self.player || !volume) {\n      return;\n    }\n\n    if (self.type === 'youtube' && self.player.setVolume) {\n      self.player.setVolume(volume);\n    }\n\n    if (self.type === 'vimeo' && self.player.setVolume) {\n      self.player.setVolume(volume);\n    }\n\n    if (self.type === 'local') {\n      self.$video.volume = volume / 100;\n    }\n  }\n\n  getVolume(callback) {\n    const self = this;\n\n    if (!self.player) {\n      callback(false);\n      return;\n    }\n\n    if (self.type === 'youtube' && self.player.getVolume) {\n      callback(self.player.getVolume());\n    }\n\n    if (self.type === 'vimeo' && self.player.getVolume) {\n      self.player.getVolume().then(volume => {\n        callback(volume);\n      });\n    }\n\n    if (self.type === 'local') {\n      callback(self.$video.volume * 100);\n    }\n  }\n\n  getMuted(callback) {\n    const self = this;\n\n    if (!self.player) {\n      callback(null);\n      return;\n    }\n\n    if (self.type === 'youtube' && self.player.isMuted) {\n      callback(self.player.isMuted());\n    }\n\n    if (self.type === 'vimeo' && self.player.getVolume) {\n      self.player.getVolume().then(volume => {\n        callback(!!volume);\n      });\n    }\n\n    if (self.type === 'local') {\n      callback(self.$video.muted);\n    }\n  }\n\n  getImageURL(callback) {\n    const self = this;\n\n    if (self.videoImage) {\n      callback(self.videoImage);\n      return;\n    }\n\n    if (self.type === 'youtube') {\n      const availableSizes = ['maxresdefault', 'sddefault', 'hqdefault', '0'];\n      let step = 0;\n      const tempImg = new Image();\n\n      tempImg.onload = function () {\n        // if no thumbnail, youtube add their own image with width = 120px\n        if ((this.naturalWidth || this.width) !== 120 || step === availableSizes.length - 1) {\n          // ok\n          self.videoImage = `https://img.youtube.com/vi/${self.videoID}/${availableSizes[step]}.jpg`;\n          callback(self.videoImage);\n        } else {\n          // try another size\n          step += 1;\n          this.src = `https://img.youtube.com/vi/${self.videoID}/${availableSizes[step]}.jpg`;\n        }\n      };\n\n      tempImg.src = `https://img.youtube.com/vi/${self.videoID}/${availableSizes[step]}.jpg`;\n    }\n\n    if (self.type === 'vimeo') {\n      let request = new XMLHttpRequest(); // https://vimeo.com/api/oembed.json?url=https://vimeo.com/235212527\n\n      request.open('GET', `https://vimeo.com/api/oembed.json?url=${self.url}`, true);\n\n      request.onreadystatechange = function () {\n        if (this.readyState === 4) {\n          if (this.status >= 200 && this.status < 400) {\n            // Success!\n            const response = JSON.parse(this.responseText);\n\n            if (response.thumbnail_url) {\n              self.videoImage = response.thumbnail_url;\n              callback(self.videoImage);\n            }\n          }\n        }\n      };\n\n      request.send();\n      request = null;\n    }\n  } // fallback to the old version.\n\n\n  getIframe(callback) {\n    this.getVideo(callback);\n  }\n\n  getVideo(callback) {\n    const self = this; // return generated video block\n\n    if (self.$video) {\n      callback(self.$video);\n      return;\n    } // generate new video block\n\n\n    self.onAPIready(() => {\n      let hiddenDiv;\n\n      if (!self.$video) {\n        hiddenDiv = document.createElement('div');\n        hiddenDiv.style.display = 'none';\n      } // Youtube\n\n\n      if (self.type === 'youtube') {\n        self.playerOptions = {\n          // GDPR Compliance.\n          host: 'https://www.youtube-nocookie.com',\n          videoId: self.videoID,\n          playerVars: {\n            autohide: 1,\n            rel: 0,\n            autoplay: 0,\n            // autoplay enable on mobile devices\n            playsinline: 1\n          }\n        }; // hide controls\n\n        if (!self.options.showControls) {\n          self.playerOptions.playerVars.iv_load_policy = 3;\n          self.playerOptions.playerVars.modestbranding = 1;\n          self.playerOptions.playerVars.controls = 0;\n          self.playerOptions.playerVars.showinfo = 0;\n          self.playerOptions.playerVars.disablekb = 1;\n        } // events\n\n\n        let ytStarted;\n        let ytProgressInterval;\n        self.playerOptions.events = {\n          onReady(e) {\n            // mute\n            if (self.options.mute) {\n              e.target.mute();\n            } else if (self.options.volume) {\n              e.target.setVolume(self.options.volume);\n            } // autoplay\n\n\n            if (self.options.autoplay) {\n              self.play(self.options.startTime);\n            }\n\n            self.fire('ready', e); // For seamless loops, set the endTime to 0.1 seconds less than the video's duration\n            // https://github.com/nk-o/video-worker/issues/2\n\n            if (self.options.loop && !self.options.endTime) {\n              const secondsOffset = 0.1;\n              self.options.endTime = self.player.getDuration() - secondsOffset;\n            } // volumechange\n\n\n            setInterval(() => {\n              self.getVolume(volume => {\n                if (self.options.volume !== volume) {\n                  self.options.volume = volume;\n                  self.fire('volumechange', e);\n                }\n              });\n            }, 150);\n          },\n\n          onStateChange(e) {\n            // loop\n            if (self.options.loop && e.data === global$1.YT.PlayerState.ENDED) {\n              self.play(self.options.startTime);\n            }\n\n            if (!ytStarted && e.data === global$1.YT.PlayerState.PLAYING) {\n              ytStarted = 1;\n              self.fire('started', e);\n            }\n\n            if (e.data === global$1.YT.PlayerState.PLAYING) {\n              self.fire('play', e);\n            }\n\n            if (e.data === global$1.YT.PlayerState.PAUSED) {\n              self.fire('pause', e);\n            }\n\n            if (e.data === global$1.YT.PlayerState.ENDED) {\n              self.fire('ended', e);\n            } // progress check\n\n\n            if (e.data === global$1.YT.PlayerState.PLAYING) {\n              ytProgressInterval = setInterval(() => {\n                self.fire('timeupdate', e); // check for end of video and play again or stop\n\n                if (self.options.endTime && self.player.getCurrentTime() >= self.options.endTime) {\n                  if (self.options.loop) {\n                    self.play(self.options.startTime);\n                  } else {\n                    self.pause();\n                  }\n                }\n              }, 150);\n            } else {\n              clearInterval(ytProgressInterval);\n            }\n          },\n\n          onError(e) {\n            self.fire('error', e);\n          }\n\n        };\n        const firstInit = !self.$video;\n\n        if (firstInit) {\n          const div = document.createElement('div');\n          div.setAttribute('id', self.playerID);\n          hiddenDiv.appendChild(div);\n          document.body.appendChild(hiddenDiv);\n        }\n\n        self.player = self.player || new global$1.YT.Player(self.playerID, self.playerOptions);\n\n        if (firstInit) {\n          self.$video = document.getElementById(self.playerID); // add accessibility attributes\n\n          if (self.options.accessibilityHidden) {\n            self.$video.setAttribute('tabindex', '-1');\n            self.$video.setAttribute('aria-hidden', 'true');\n          } // get video width and height\n\n\n          self.videoWidth = parseInt(self.$video.getAttribute('width'), 10) || 1280;\n          self.videoHeight = parseInt(self.$video.getAttribute('height'), 10) || 720;\n        }\n      } // Vimeo\n\n\n      if (self.type === 'vimeo') {\n        self.playerOptions = {\n          // GDPR Compliance.\n          dnt: 1,\n          id: self.videoID,\n          autopause: 0,\n          transparent: 0,\n          autoplay: self.options.autoplay ? 1 : 0,\n          loop: self.options.loop ? 1 : 0,\n          muted: self.options.mute ? 1 : 0\n        };\n\n        if (self.options.volume) {\n          self.playerOptions.volume = self.options.volume;\n        } // hide controls\n\n\n        if (!self.options.showControls) {\n          self.playerOptions.badge = 0;\n          self.playerOptions.byline = 0;\n          self.playerOptions.portrait = 0;\n          self.playerOptions.title = 0;\n          self.playerOptions.background = 1;\n        }\n\n        if (!self.$video) {\n          let playerOptionsString = '';\n          Object.keys(self.playerOptions).forEach(key => {\n            if (playerOptionsString !== '') {\n              playerOptionsString += '&';\n            }\n\n            playerOptionsString += `${key}=${encodeURIComponent(self.playerOptions[key])}`;\n          }); // we need to create iframe manually because when we create it using API\n          // js events won't triggers after iframe moved to another place\n\n          self.$video = document.createElement('iframe');\n          self.$video.setAttribute('id', self.playerID);\n          self.$video.setAttribute('src', `https://player.vimeo.com/video/${self.videoID}?${playerOptionsString}`);\n          self.$video.setAttribute('frameborder', '0');\n          self.$video.setAttribute('mozallowfullscreen', '');\n          self.$video.setAttribute('allowfullscreen', '');\n          self.$video.setAttribute('title', 'Vimeo video player'); // add accessibility attributes\n\n          if (self.options.accessibilityHidden) {\n            self.$video.setAttribute('tabindex', '-1');\n            self.$video.setAttribute('aria-hidden', 'true');\n          }\n\n          hiddenDiv.appendChild(self.$video);\n          document.body.appendChild(hiddenDiv);\n        }\n\n        self.player = self.player || new global$1.Vimeo.Player(self.$video, self.playerOptions); // set current time for autoplay\n\n        if (self.options.startTime && self.options.autoplay) {\n          self.player.setCurrentTime(self.options.startTime);\n        } // get video width and height\n\n\n        self.player.getVideoWidth().then(width => {\n          self.videoWidth = width || 1280;\n        });\n        self.player.getVideoHeight().then(height => {\n          self.videoHeight = height || 720;\n        }); // events\n\n        let vmStarted;\n        self.player.on('timeupdate', e => {\n          if (!vmStarted) {\n            self.fire('started', e);\n            vmStarted = 1;\n          }\n\n          self.fire('timeupdate', e); // check for end of video and play again or stop\n\n          if (self.options.endTime) {\n            if (self.options.endTime && e.seconds >= self.options.endTime) {\n              if (self.options.loop) {\n                self.play(self.options.startTime);\n              } else {\n                self.pause();\n              }\n            }\n          }\n        });\n        self.player.on('play', e => {\n          self.fire('play', e); // check for the start time and start with it\n\n          if (self.options.startTime && e.seconds === 0) {\n            self.play(self.options.startTime);\n          }\n        });\n        self.player.on('pause', e => {\n          self.fire('pause', e);\n        });\n        self.player.on('ended', e => {\n          self.fire('ended', e);\n        });\n        self.player.on('loaded', e => {\n          self.fire('ready', e);\n        });\n        self.player.on('volumechange', e => {\n          self.fire('volumechange', e);\n        });\n        self.player.on('error', e => {\n          self.fire('error', e);\n        });\n      } // Local\n\n\n      function addSourceToLocal(element, src, type) {\n        const source = document.createElement('source');\n        source.src = src;\n        source.type = type;\n        element.appendChild(source);\n      }\n\n      if (self.type === 'local') {\n        if (!self.$video) {\n          self.$video = document.createElement('video'); // show controls\n\n          if (self.options.showControls) {\n            self.$video.controls = true;\n          } // mute\n\n\n          if (self.options.mute) {\n            self.$video.muted = true;\n          } else if (self.$video.volume) {\n            self.$video.volume = self.options.volume / 100;\n          } // loop\n\n\n          if (self.options.loop) {\n            self.$video.loop = true;\n          } // autoplay enable on mobile devices\n\n\n          self.$video.setAttribute('playsinline', '');\n          self.$video.setAttribute('webkit-playsinline', ''); // add accessibility attributes\n\n          if (self.options.accessibilityHidden) {\n            self.$video.setAttribute('tabindex', '-1');\n            self.$video.setAttribute('aria-hidden', 'true');\n          }\n\n          self.$video.setAttribute('id', self.playerID);\n          hiddenDiv.appendChild(self.$video);\n          document.body.appendChild(hiddenDiv);\n          Object.keys(self.videoID).forEach(key => {\n            addSourceToLocal(self.$video, self.videoID[key], `video/${key}`);\n          });\n        }\n\n        self.player = self.player || self.$video;\n        let locStarted;\n        self.player.addEventListener('playing', e => {\n          if (!locStarted) {\n            self.fire('started', e);\n          }\n\n          locStarted = 1;\n        });\n        self.player.addEventListener('timeupdate', function (e) {\n          self.fire('timeupdate', e); // check for end of video and play again or stop\n\n          if (self.options.endTime) {\n            if (self.options.endTime && this.currentTime >= self.options.endTime) {\n              if (self.options.loop) {\n                self.play(self.options.startTime);\n              } else {\n                self.pause();\n              }\n            }\n          }\n        });\n        self.player.addEventListener('play', e => {\n          self.fire('play', e);\n        });\n        self.player.addEventListener('pause', e => {\n          self.fire('pause', e);\n        });\n        self.player.addEventListener('ended', e => {\n          self.fire('ended', e);\n        });\n        self.player.addEventListener('loadedmetadata', function () {\n          // get video width and height\n          self.videoWidth = this.videoWidth || 1280;\n          self.videoHeight = this.videoHeight || 720;\n          self.fire('ready'); // autoplay\n\n          if (self.options.autoplay) {\n            self.play(self.options.startTime);\n          }\n        });\n        self.player.addEventListener('volumechange', e => {\n          self.getVolume(volume => {\n            self.options.volume = volume;\n          });\n          self.fire('volumechange', e);\n        });\n        self.player.addEventListener('error', e => {\n          self.fire('error', e);\n        });\n      }\n\n      callback(self.$video);\n    });\n  }\n\n  init() {\n    const self = this;\n    self.playerID = `VideoWorker-${self.ID}`;\n  }\n\n  loadAPI() {\n    const self = this;\n\n    if (YoutubeAPIadded && VimeoAPIadded) {\n      return;\n    }\n\n    let src = ''; // load Youtube API\n\n    if (self.type === 'youtube' && !YoutubeAPIadded) {\n      YoutubeAPIadded = 1;\n      src = 'https://www.youtube.com/iframe_api';\n    } // load Vimeo API\n\n\n    if (self.type === 'vimeo' && !VimeoAPIadded) {\n      VimeoAPIadded = 1; // Useful when Vimeo API added using RequireJS https://github.com/nk-o/video-worker/pull/7\n\n      if (typeof global$1.Vimeo !== 'undefined') {\n        return;\n      }\n\n      src = 'https://player.vimeo.com/api/player.js';\n    }\n\n    if (!src) {\n      return;\n    } // add script in head section\n\n\n    let tag = document.createElement('script');\n    let head = document.getElementsByTagName('head')[0];\n    tag.src = src;\n    head.appendChild(tag);\n    head = null;\n    tag = null;\n  }\n\n  onAPIready(callback) {\n    const self = this; // Youtube\n\n    if (self.type === 'youtube') {\n      // Listen for global YT player callback\n      if ((typeof global$1.YT === 'undefined' || global$1.YT.loaded === 0) && !loadingYoutubePlayer) {\n        // Prevents Ready event from being called twice\n        loadingYoutubePlayer = 1; // Creates deferred so, other players know when to wait.\n\n        global$1.onYouTubeIframeAPIReady = function () {\n          global$1.onYouTubeIframeAPIReady = null;\n          loadingYoutubeDefer.resolve('done');\n          callback();\n        };\n      } else if (typeof global$1.YT === 'object' && global$1.YT.loaded === 1) {\n        callback();\n      } else {\n        loadingYoutubeDefer.done(() => {\n          callback();\n        });\n      }\n    } // Vimeo\n\n\n    if (self.type === 'vimeo') {\n      if (typeof global$1.Vimeo === 'undefined' && !loadingVimeoPlayer) {\n        loadingVimeoPlayer = 1;\n        const vimeoInterval = setInterval(() => {\n          if (typeof global$1.Vimeo !== 'undefined') {\n            clearInterval(vimeoInterval);\n            loadingVimeoDefer.resolve('done');\n            callback();\n          }\n        }, 20);\n      } else if (typeof global$1.Vimeo !== 'undefined') {\n        callback();\n      } else {\n        loadingVimeoDefer.done(() => {\n          callback();\n        });\n      }\n    } // Local\n\n\n    if (self.type === 'local') {\n      callback();\n    }\n  }\n\n}\n\nexport { VideoWorker as default };\n//# sourceMappingURL=video-worker.esm.js.map\n","import VideoWorker from 'video-worker';\n\nimport global from './utils/global';\n\nfunction jarallaxVideo(jarallax = global.jarallax) {\n  if (typeof jarallax === 'undefined') {\n    return;\n  }\n\n  const Jarallax = jarallax.constructor;\n\n  // append video after when block will be visible.\n  const defOnScroll = Jarallax.prototype.onScroll;\n  Jarallax.prototype.onScroll = function () {\n    const self = this;\n\n    defOnScroll.apply(self);\n\n    const isReady =\n      !self.isVideoInserted &&\n      self.video &&\n      (!self.options.videoLazyLoading || self.isElementInViewport) &&\n      !self.options.disableVideo();\n\n    if (isReady) {\n      self.isVideoInserted = true;\n\n      self.video.getVideo((video) => {\n        const $parent = video.parentNode;\n        self.css(video, {\n          position: self.image.position,\n          top: '0px',\n          left: '0px',\n          right: '0px',\n          bottom: '0px',\n          width: '100%',\n          height: '100%',\n          maxWidth: 'none',\n          maxHeight: 'none',\n          pointerEvents: 'none',\n          transformStyle: 'preserve-3d',\n          backfaceVisibility: 'hidden',\n          willChange: 'transform,opacity',\n          margin: 0,\n          zIndex: -1,\n        });\n        self.$video = video;\n\n        // add Poster attribute to self-hosted video\n        if (self.video.type === 'local') {\n          if (self.image.src) {\n            self.$video.setAttribute('poster', self.image.src);\n          } else if (\n            self.image.$item &&\n            self.image.$item.tagName === 'IMG' &&\n            self.image.$item.src\n          ) {\n            self.$video.setAttribute('poster', self.image.$item.src);\n          }\n        }\n\n        // insert video tag\n        self.image.$container.appendChild(video);\n\n        // remove parent video element (created by VideoWorker)\n        $parent.parentNode.removeChild($parent);\n\n        // call onVideoInsert event\n        if (self.options.onVideoInsert) {\n          self.options.onVideoInsert.call(self);\n        }\n      });\n    }\n  };\n\n  // cover video\n  const defCoverImage = Jarallax.prototype.coverImage;\n  Jarallax.prototype.coverImage = function () {\n    const self = this;\n    const imageData = defCoverImage.apply(self);\n    const node = self.image.$item ? self.image.$item.nodeName : false;\n\n    if (imageData && self.video && node && (node === 'IFRAME' || node === 'VIDEO')) {\n      let h = imageData.image.height;\n      let w = (h * self.image.width) / self.image.height;\n      let ml = (imageData.container.width - w) / 2;\n      let mt = imageData.image.marginTop;\n\n      if (imageData.container.width > w) {\n        w = imageData.container.width;\n        h = (w * self.image.height) / self.image.width;\n        ml = 0;\n        mt += (imageData.image.height - h) / 2;\n      }\n\n      // add video height over than need to hide controls\n      if (node === 'IFRAME') {\n        h += 400;\n        mt -= 200;\n      }\n\n      self.css(self.$video, {\n        width: `${w}px`,\n        marginLeft: `${ml}px`,\n        height: `${h}px`,\n        marginTop: `${mt}px`,\n      });\n    }\n\n    return imageData;\n  };\n\n  // init video\n  const defInitImg = Jarallax.prototype.initImg;\n  Jarallax.prototype.initImg = function () {\n    const self = this;\n    const defaultResult = defInitImg.apply(self);\n\n    if (!self.options.videoSrc) {\n      self.options.videoSrc = self.$item.getAttribute('data-jarallax-video') || null;\n    }\n\n    if (self.options.videoSrc) {\n      self.defaultInitImgResult = defaultResult;\n      return true;\n    }\n\n    return defaultResult;\n  };\n\n  const defCanInitParallax = Jarallax.prototype.canInitParallax;\n  Jarallax.prototype.canInitParallax = function () {\n    const self = this;\n    let defaultResult = defCanInitParallax.apply(self);\n\n    if (!self.options.videoSrc) {\n      return defaultResult;\n    }\n\n    // Init video api\n    const video = new VideoWorker(self.options.videoSrc, {\n      autoplay: true,\n      loop: self.options.videoLoop,\n      showControls: false,\n      accessibilityHidden: true,\n      startTime: self.options.videoStartTime || 0,\n      endTime: self.options.videoEndTime || 0,\n      mute: self.options.videoVolume ? 0 : 1,\n      volume: self.options.videoVolume || 0,\n    });\n\n    // call onVideoWorkerInit event\n    if (self.options.onVideoWorkerInit) {\n      self.options.onVideoWorkerInit.call(self, video);\n    }\n\n    function resetDefaultImage() {\n      if (self.image.$default_item) {\n        self.image.$item = self.image.$default_item;\n        self.image.$item.style.display = 'block';\n\n        // set image width and height\n        self.coverImage();\n        self.clipContainer();\n        self.onScroll();\n      }\n    }\n\n    if (video.isValid()) {\n      // Force enable parallax.\n      // When the parallax disabled on mobile devices, we still need to display videos.\n      // https://github.com/nk-o/jarallax/issues/159\n      if (this.options.disableParallax()) {\n        defaultResult = true;\n        self.image.position = 'absolute';\n        self.options.type = 'scroll';\n        self.options.speed = 1;\n      }\n\n      // if parallax will not be inited, we can add thumbnail on background.\n      if (!defaultResult) {\n        if (!self.defaultInitImgResult) {\n          video.getImageURL((url) => {\n            // save default user styles\n            const curStyle = self.$item.getAttribute('style');\n            if (curStyle) {\n              self.$item.setAttribute('data-jarallax-original-styles', curStyle);\n            }\n\n            // set new background\n            self.css(self.$item, {\n              'background-image': `url(\"${url}\")`,\n              'background-position': 'center',\n              'background-size': 'cover',\n            });\n          });\n        }\n\n        // init video\n      } else {\n        video.on('ready', () => {\n          if (self.options.videoPlayOnlyVisible) {\n            const oldOnScroll = self.onScroll;\n            self.onScroll = function () {\n              oldOnScroll.apply(self);\n              if (\n                !self.videoError &&\n                (self.options.videoLoop || (!self.options.videoLoop && !self.videoEnded))\n              ) {\n                if (self.isVisible()) {\n                  video.play();\n                } else {\n                  video.pause();\n                }\n              }\n            };\n          } else {\n            video.play();\n          }\n        });\n        video.on('started', () => {\n          self.image.$default_item = self.image.$item;\n          self.image.$item = self.$video;\n\n          // set video width and height\n          self.image.width = self.video.videoWidth || 1280;\n          self.image.height = self.video.videoHeight || 720;\n          self.coverImage();\n          self.clipContainer();\n          self.onScroll();\n\n          // hide image\n          if (self.image.$default_item) {\n            self.image.$default_item.style.display = 'none';\n          }\n        });\n\n        video.on('ended', () => {\n          self.videoEnded = true;\n\n          if (!self.options.videoLoop) {\n            // show default image if Loop disabled.\n            resetDefaultImage();\n          }\n        });\n        video.on('error', () => {\n          self.videoError = true;\n\n          // show default image if video loading error.\n          resetDefaultImage();\n        });\n\n        self.video = video;\n\n        // set image if not exists\n        if (!self.defaultInitImgResult) {\n          // set empty image on self-hosted video if not defined\n          self.image.src =\n            'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\n\n          if (video.type !== 'local') {\n            video.getImageURL((url) => {\n              self.image.bgImage = `url(\"${url}\")`;\n              self.init();\n            });\n\n            return false;\n          }\n        }\n      }\n    }\n\n    return defaultResult;\n  };\n\n  // Destroy video parallax\n  const defDestroy = Jarallax.prototype.destroy;\n  Jarallax.prototype.destroy = function () {\n    const self = this;\n\n    if (self.image.$default_item) {\n      self.image.$item = self.image.$default_item;\n      delete self.image.$default_item;\n    }\n\n    defDestroy.apply(self);\n  };\n}\n\nexport default jarallaxVideo;\n","/* eslint no-case-declarations: \"off\" */\nimport global from '../utils/global';\n\nfunction jarallaxElement(jarallax = global.jarallax) {\n  // eslint-disable-next-line no-console\n  console.warning(\n    \"Jarallax Element extension is DEPRECATED, please, avoid using it. We recommend you look at something like `lax.js` library <https://github.com/alexfoxy/lax.js>. It is much more powerful and has a less code (in cases when you don't want to add parallax backgrounds).\"\n  );\n\n  if (typeof jarallax === 'undefined') {\n    return;\n  }\n\n  const Jarallax = jarallax.constructor;\n\n  // redefine default methods\n  [\n    'initImg',\n    'canInitParallax',\n    'init',\n    'destroy',\n    'clipContainer',\n    'coverImage',\n    'isVisible',\n    'onScroll',\n    'onResize',\n  ].forEach((key) => {\n    const def = Jarallax.prototype[key];\n    Jarallax.prototype[key] = function (...args) {\n      const self = this;\n\n      if (key === 'initImg' && self.$item.getAttribute('data-jarallax-element') !== null) {\n        self.options.type = 'element';\n        self.pureOptions.speed =\n          self.$item.getAttribute('data-jarallax-element') || self.pureOptions.speed;\n      }\n      if (self.options.type !== 'element') {\n        return def.apply(self, args);\n      }\n\n      self.pureOptions.threshold = self.$item.getAttribute('data-threshold') || '';\n\n      switch (key) {\n        case 'init':\n          const speedArr = self.pureOptions.speed.split(' ');\n          self.options.speed = self.pureOptions.speed || 0;\n          self.options.speedY = speedArr[0] ? parseFloat(speedArr[0]) : 0;\n          self.options.speedX = speedArr[1] ? parseFloat(speedArr[1]) : 0;\n\n          const thresholdArr = self.pureOptions.threshold.split(' ');\n          self.options.thresholdY = thresholdArr[0] ? parseFloat(thresholdArr[0]) : null;\n          self.options.thresholdX = thresholdArr[1] ? parseFloat(thresholdArr[1]) : null;\n\n          def.apply(self, args);\n\n          // restore background image if available.\n          const originalStylesTag = self.$item.getAttribute('data-jarallax-original-styles');\n          if (originalStylesTag) {\n            self.$item.setAttribute('style', originalStylesTag);\n          }\n\n          return true;\n        case 'onResize':\n          const defTransform = self.css(self.$item, 'transform');\n          self.css(self.$item, { transform: '' });\n          const rect = self.$item.getBoundingClientRect();\n          self.itemData = {\n            width: rect.width,\n            height: rect.height,\n            y: rect.top + self.getWindowData().y,\n            x: rect.left,\n          };\n          self.css(self.$item, { transform: defTransform });\n          break;\n        case 'onScroll':\n          const wnd = self.getWindowData();\n          const centerPercent =\n            (wnd.y + wnd.height / 2 - self.itemData.y - self.itemData.height / 2) /\n            (wnd.height / 2);\n          const moveY = centerPercent * self.options.speedY;\n          const moveX = centerPercent * self.options.speedX;\n          let my = moveY;\n          let mx = moveX;\n          if (self.options.thresholdY !== null && moveY > self.options.thresholdY) my = 0;\n          if (self.options.thresholdX !== null && moveX > self.options.thresholdX) mx = 0;\n          self.css(self.$item, { transform: `translate3d(${mx}px,${my}px,0)` });\n          break;\n        case 'initImg':\n        case 'isVisible':\n        case 'clipContainer':\n        case 'coverImage':\n          return true;\n        // no default\n      }\n      return def.apply(self, args);\n    };\n  });\n}\n\nexport default jarallaxElement;\n","import jarallax from './core';\nimport jarallaxVideo from './ext-video';\nimport jarallaxElement from './deprecated/ext-element';\n\nexport default {\n  jarallax,\n  jarallaxVideo() {\n    return jarallaxVideo(jarallax);\n  },\n\n  // Deprecated.\n  jarallaxElement() {\n    return jarallaxElement(jarallax);\n  },\n};\n"],"names":["ready","callback","document","readyState","addEventListener","capture","once","passive","win","window","global","self","navigator","isIE","userAgent","indexOf","isMobile","test","supportTransform","prefixes","split","div","createElement","i","length","style","undefined","$deviceHelper","getDeviceHeight","body","cssText","appendChild","clientHeight","innerHeight","documentElement","wndH","updateWndVars","domReady","jarallaxList","getParents","elem","parents","parentElement","nodeType","push","updateParallax","forEach","data","k","instance","oldData","clientRect","$item","getBoundingClientRect","newData","width","height","top","bottom","wndW","innerWidth","isResized","isScrolled","onResize","onScroll","requestAnimationFrame","instanceID","Jarallax","constructor","item","userOptions","defaults","type","speed","imgSrc","imgElement","imgSize","imgPosition","imgRepeat","keepImg","elementInViewport","zIndex","disableParallax","disableVideo","videoSrc","videoStartTime","videoEndTime","videoVolume","videoLoop","videoPlayOnlyVisible","videoLazyLoading","onInit","onDestroy","onCoverImage","dataOptions","dataset","pureDataOptions","Object","keys","key","loweCaseOption","substr","toLowerCase","options","extend","pureOptions","Math","min","max","parseFloat","RegExp","disableParallaxRegexp","disableVideoRegexp","elementInVP","Element","image","src","$container","useImgTag","position","initImg","canInitParallax","init","css","el","styles","getComputedStyle","getPropertyValue","transform","out","args","getWindowData","clientWidth","y","scrollTop","$imgElement","querySelector","Image","cloneNode","$itemParent","parentNode","bgImage","containerStyles","left","overflow","imageStyles","pointerEvents","transformStyle","backfaceVisibility","willChange","curStyle","getAttribute","setAttribute","curImgStyle","opacity","$parents","filter","parentTransform","overflowRegex","call","addToParallaxList","removeFromParallaxList","splice","destroy","originalStylesTag","removeAttribute","originalStylesImgTag","$clipStyles","removeChild","jarallax","clipContainer","rect","head","getElementsByTagName","styleSheet","innerHTML","coverImage","contH","isScroll","scrollDist","resultH","resultMT","abs","parallaxScrollDistance","marginTop","container","isVisible","isElementInViewport","force","contT","viewportRect","right","beforeTop","beforeTopEnd","afterTop","beforeBottom","beforeBottomEnd","afterBottom","fromViewportCenter","visiblePercent","scale","positionY","section","items","HTMLElement","nodeName","len","ret","apply","jarallaxVideo","defOnScroll","prototype","isReady","isVideoInserted","video","getVideo","$parent","maxWidth","maxHeight","margin","$video","tagName","onVideoInsert","defCoverImage","imageData","node","h","w","ml","mt","marginLeft","defInitImg","defaultResult","defaultInitImgResult","defCanInitParallax","VideoWorker","autoplay","loop","showControls","accessibilityHidden","startTime","endTime","mute","volume","onVideoWorkerInit","resetDefaultImage","$default_item","display","isValid","getImageURL","url","on","oldOnScroll","videoError","videoEnded","play","pause","videoWidth","videoHeight","defDestroy","jarallaxElement","console","warning","def","threshold","speedArr","speedY","speedX","thresholdArr","thresholdY","thresholdX","defTransform","itemData","x","wnd","centerPercent","moveY","moveX","my","mx"],"mappings":"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"}